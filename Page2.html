<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Comments Page 2</title>  
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>  
    <style>
        /* Giữ nguyên CSS */
    </style>
</head>  
<body>  
    <h1>Write your all chats here!</h1>  
    <hr>  

    <b><ins>Enter your name:</ins></b><br>  
    <input type="text" id="username" placeholder="Enter your name here"><br>  
    <button onclick="login()">Login</button>  
    <p id="welcome-message"></p>  
    <hr>  

    <b><ins>Write your comments below ↓↓↓:</ins></b>  
    <hr>  

    <textarea id="comment" name="comment" rows="4" cols="50" placeholder="Write your comment here"></textarea><br>  
    <button onclick="submitComment()">Send</button>  
    <button onclick="goToPage3()">View All Comments</button>  
    <div id="comment-list"></div>  

    <script>  
        const socket = io("http://localhost:3000");  
        let username = "";  

        function login() {  
            const inputName = document.getElementById("username").value.trim();  
            if (inputName !== "") {  
                username = inputName;  
                document.getElementById("welcome-message").innerText = "Welcome, " + username + "!";  
                document.getElementById("username").disabled = true;  
            } else {  
                alert("Please enter your name.");  
            }  
        }  

        function submitComment() {  
            let commentText = document.getElementById("comment").value.trim();  
            if (commentText !== "" && username !== "") {  
                socket.emit("new_comment", { user: username, text: commentText });  
                document.getElementById("comment").value = "";  
            } else if (username === "") {  
                alert("Please login before commenting.");  
            } else {  
                alert("Comment cannot be empty.");  
            }  
        }  

        socket.on("receive_comment", (data) => {  
            let commentDiv = document.createElement("div");  
            commentDiv.innerText = `${data.user}: ${data.text}`;  
            document.getElementById("comment-list").appendChild(commentDiv);  
        });  

        function goToPage3() {  
            window.location.href = "Page3.html";  
        }  
    </script>  

    <hr>
    <a href="index.html">Back to home page</a>
</body>  
</html>
