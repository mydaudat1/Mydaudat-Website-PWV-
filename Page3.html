<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <title>Comments Page 3</title>  
    <style>
        :root {
            --md-sys-color-primary: #006a61; /* Example Primary color */
            --md-sys-color-on-primary: #ffffff; /* Example On Primary color */
            --md-sys-color-background: #f8f9fa; /* Example Background color */
            --md-sys-color-on-background: #1a1c1e; /* Example On Background color */
        }
    </style>
    <style>
        * {
            margin: 0; /* Material 3 uses spacing tokens, but for a simple conversion, keeping 0 */
            padding: 0; /* Material 3 uses spacing tokens, but for a simple conversion, keeping 0 */
            box-sizing: border-box;
            font-family: 'Roboto', sans-serif; /* Common font for Material Design */
        }

        body {
            background-color: #f8f9fa; /* A light neutral background */
            padding: 24px; /* Spacing similar to Material 3 padding tokens */
            max-width: 800px; /* Keeping a reasonable max-width */
            margin: 0 auto;
        }

        h1 {
            color: #1a1c1e; /* A dark neutral color for text */
            text-align: center;
            margin: 32px 0; /* Increased vertical margin */
            font-size: 2.25em; /* Larger heading size */
            font-weight: 400; /* Regular weight for expressive headers */
            /* Material 3 generally doesn't use text shadows on headings */
        }

        hr {
            border: 0;
            height: 1px;
            background-color: #e3e3e3; /* A subtle divider color */
            margin: 16px 0; /* Consistent vertical margin */
        }

        #all-comments {
            background-color: #ffffff; /* White background for the container */
            padding: 16px; /* Padding inside the container */
            border-radius: 12px; /* More rounded corners for expressive feel */
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); /* A subtle Material 3 shadow */
            margin: 24px 0; /* Vertical margin for the container */
        }

        #all-comments div {
            padding: 12px 16px; /* Padding inside comment blocks */
            margin: 8px 0; /* Vertical margin between comments */
            background-color: #eef2f7; /* A light, slightly tinted background for comment blocks */
            border-radius: 8px; /* Rounded corners for comment blocks */
            border-left: 4px solid #006a61; /* Material 3 primary green color for the left border */
            transition: transform 0.2s ease;
            color: #1a1c1e; /* Dark neutral text color */
            font-size: 1em; /* Base font size */
        }

        #all-comments div:hover {
            transform: translateX(4px); /* Slightly less aggressive hover effect */
            background-color: #e0e6ed; /* A slightly darker tint on hover */
        }

        button {
            background-color: #006a61; /* Material 3 primary green color */
            color: #ffffff; /* White text color */
            padding: 12px 24px; /* Larger padding for a more substantial button */
            border: none; /* No border */
            border-radius: 20px; /* Pill-shaped button */
            font-weight: 500; /* Medium font weight */
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 15px 0;
            display: block;
            width: 200px;
            margin-left: auto;
            margin-right: auto;
        }

        button:hover {
            background-color: #004d44; /* Darker shade of green on hover */
        }

        a {
            color: #006a61; /* Material 3 primary green for links */
            text-decoration: none; /* No underline by default */
            display: inline-block;
            margin-top: 15px;
            transition: color 0.3s ease;
            font-weight: 500; /* Medium font weight for links */
        }

        a:hover {
            color: #004d44; /* Darker green on hover */
            text-decoration: underline;
        }

        #all-comments:empty::before {
            content: "No comments yet.";
            color: #757575; /* A neutral gray color */
            font-style: italic;
            display: block; /* Ensure it takes up space */
            text-align: center; /* Center the text */
        }

        #all-chats {
            background-color: #ffffff; /* White background for the container */
            padding: 16px; /* Padding inside the container */
            border-radius: 12px; /* More rounded corners for expressive feel */
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); /* A subtle Material 3 shadow */
            margin: 24px 0; /* Vertical margin for the container */
        }

        #all-chats div {
            padding: 12px 16px; /* Padding inside chat blocks */
            margin: 8px 0; /* Vertical margin between chats */
            background-color: #eef2f7; /* A light, slightly tinted background for chat blocks */
            border-radius: 8px; /* Rounded corners for chat blocks */
            border-left: 4px solid #c0392b; /* A distinct color for chat messages */
            transition: transform 0.2s ease;
            color: #1a1c1e; /* Dark neutral text color */
        }

        #all-chats div:hover {
            transform: translateX(4px); /* Slightly less aggressive hover effect */
        }

        #all-chats:empty::before {
            content: "No chat messages yet.";
            color: #7f8c8d;
            font-style: italic;
        }

        /* Added styles for overall theme consistency */
    </style>
</head>  
<body>  
    <h1>All Comments</h1>  
    <hr>  
    <div id="all-comments"></div>

    <script>  
        // Connect to the Socket.IO server
        const socket = io();

        // Request comments from the server when the page loads
        window.onload = function() {  
            socket.emit('getComments');
        };  

        // Listen for the 'commentAdded' event to receive and display newly added comments
        // Listen for the 'loadComments' event (or reuse 'commentAdded') to load initial comments
        // This is assumed to be sent from the server in response to 'getComments'
        socket.on('commentAdded', function(comments) {
            let commentListDiv = document.getElementById("all-comments");
            commentListDiv.innerHTML = ''; // Clear existing comments before loading
            if (Array.isArray(comments)) {
                comments.forEach(function(comment) {
                    let commentDiv = document.createElement("div");
                    if (typeof comment === 'object' && comment !== null) {
                        commentDiv.innerText = `${comment.username} (${comment.count}): ${comment.commentText}`;
                    } else {
                        commentDiv.innerText = comment;
                    }
                    commentListDiv.appendChild(commentDiv);
                });
            }
            // Also handle single new comments being added
            else if (typeof comments === 'object' && comments !== null) {
                let commentListDiv = document.getElementById("all-comments");
                let commentDiv = document.createElement("div");
                commentDiv.innerText = `${comments.username} (${comments.count}): ${comments.commentText}`;
                commentListDiv.appendChild(commentDiv);
            } else if (typeof comments === 'string') {
                let commentListDiv = document.getElementById("all-comments");
                commentListDiv.innerHTML += `<div>${comments}</div>`; // Append as a new div
            }
        });

        socket.on('chatMessage', function(chatMessage) {
            let chatListDiv = document.getElementById("all-chats");
            if (chatListDiv) { // Check if the chat div exists
                let chatDiv = document.createElement("div");
                // Assuming chatMessage is an object with username and text
                if (typeof chatMessage === 'object' && chatMessage !== null) {
                    let chatDiv = document.createElement("div");
                    // Assuming chatMessage is stored as an object with username and text
                    chatDiv.innerText = `${chatMessage.username}: ${chatMessage.text}`;
                    chatListDiv.appendChild(chatDiv);
                } else {
                    chatDiv.innerText = chatMessage; // For backward compatibility
                    chatListDiv.appendChild(chatDiv);
                }
            }
        };  
    </script> 
 <script src="/socket.io/socket.io.js"></script>
    <script>
        // Quay láº¡i Page2.html  
        function goBack() {  
            window.location.href = "Page2.html";  
        }  
    </script> 
    <h1>All Chat Messages</h1>
    <hr>
    <div id="all-chats"></div>

    <button onclick="goBack()">Go Back to Page 2</button>
    <hr>
    <a href="index.html">
        Back to home page
    </a>
</body>  
</html>
